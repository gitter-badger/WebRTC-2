<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>GetUserMedia实例</title>
</head>

<body>
    <video id="video" autoplay></video>
</body>
<script type="text/javascript">
    navigator.mediaDevices.getUserMedia({
        video: {
            width: {
                min: 580,
                ideal: 1280,
                max: 1920
            },
            height: {
                min: 360,
                ideal: 720,
                max: 1080
            }
        },
        audio: true
    }).then(function(localMediaStream) {
        var video = document.getElementById('video');
        video.src = window.URL.createObjectURL(localMediaStream);
        video.onloadedmetadata = function(e) {
            console.log("Id: " + localMediaStream.id);
            console.log("AudioTracks", localMediaStream.getAudioTracks());
            console.log("VideoTracks", localMediaStream.getVideoTracks());
        };
    }).catch(function(e) {
        console.log('Reeeejected!', e);
    });

    if (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {
        console.log("enumerateDevices() not supported.");
    } else {
        navigator.mediaDevices.enumerateDevices()
            .then(function(devices) {
                devices.forEach(function(device) {
                    console.log(device.kind + ": " + device.label +
                        " id = " + device.deviceId);
                });
            })
            .catch(function(err) {
                console.log(err.name + ": " + err.message);
            });
    }
</script>

</html>